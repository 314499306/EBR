# 工厂信息

## 1. 工厂信息介绍

### 1.1 模型图

- 工厂模型
  - ![pic](/pics/工厂模型.png)
- 工厂物理模型
  - ![pic](/pics/工厂模型_物理模型.png)
  - Resouce: 工站,库位,外设（打印机,电子称等）

### 1.2 模型说明

- 本模块为企业的物理模型
- 工厂的层级模型可以用来作为库存,生产,质量,设备物理分层管理的基础.
- 各层级通过管理配置进行关联
- 层级关系:
  - 位置:区域 <=> N:1
  - 一个位置只能属于一个区域,一个区域可以有一个或多个位置
  - 区域:厂区 <=> N:1
    - 一个区域只能属于一个厂区,一个厂区可以有一个或多个区域
  - 厂区:企业 <=> N:1
    - 一个厂区只能属于一个企业,一个企业可以有一个或多个厂区

### 1.3 相关概念说明

- 企业:一个或多个厂区的汇集.
- 厂区:工厂
- 区域:车间
- 位置:工作中心,生产线,存储区等产线级别生产活动地点.（注:与库位不同）,位置级别之下的视为资源
  - S95 中资源的说明: 企业的实体,它提供执行企业活动和/或业务过程所需的一些或所有的能力（在本部分中,是人员,设备,和/或物料的集合）
  - 资源通过位置来关联区域,
  - 位置可以聚合为位置组,占据区域中的部分段,即可以通过区段管理位置,以便于更好的支持业务.

### 1.4 区段,位置,资源

- 本系统的位置为工作中心/产线/库区级别,工作中心,产线,库区的均有位置属性
- 区段不属于分层模型的层级,服务于工作中心或库区等位置级别的业务使用,为区域中的一段,为可选信息
  - 位置:区段 <=> N:1
  - 一个位置只能属于一个区段,一个区段可以有一个或多个工作中心/库区
  - 区段为可选属性
- 通过位置隔离库存,生产,质量,设备等管理活动的业务特性的不同
  - 工作中心与位置平级,工作中心可以扩展为其他业务类型,但是要保持与当前工作中心保持相同的层次结果关系,有位置属性,在区域之下,包含工作单元
    - 工站:工作中心 <=> N:1,即一个工站只能属于一个工作中心,一个工作中心可以有一个或多个工站
  - 库区与位置平级
    - 库位:库区 <=> N:1,即一个库位只能属于一个库区,一个库区可以有一个或多个库位
  - 工站,库位,等具体的生产活动地点,为工作单元.

---

## 2. 企业

### 2.1 介绍

- 企业不是必须的
- 用来管理厂区

### 2.2 界面说明

- 主界面: ![pic](/pics/工厂模型_企业.png)
- 编辑企业信息: ![pic](/pics/工厂模型_企业_编辑.png)
- 关联厂区: ![pic](/pics/工厂模型_企业_厂区关联.png)

### 2.3 字段说明

- 企业代码长度限制为固定长度 2;其他约束满足系统 code 的统一约束
- 详见 schema 设计

### 2.4 操作说明

#### 2.4.1 排序筛选

- 主界面-企业列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:编码,名称,创建时间,修改时间
  - 筛选
    - 默认筛选: 无
    - 字段范围:编码,名称,创建时间,修改时间
- 主界面-企业厂区信息
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:厂区编码,厂区名称,地址 1,,地址 2,地址 3,地址 4
  - 筛选
    - 默认筛选: 无
    - 字段范围:厂区编码,厂区名称,地址 1,,地址 2,地址 3,地址 4

#### 2.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑企业信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必选项

#### 2.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 2.4.4 删除

- 清除所选记录
- 已被厂区使用时,不可删除.

#### 2.4.5 刷新

- 获取服务端最新数据

#### 2.4.6 关联

- 参考界面"关联厂区",进行企业与厂区的关联或反操作.

---

## 3. 厂区

### 3.1 介绍

- 用来管理区域,与企业管理厂区的模式相同,为工厂级别

### 3.2 界面说明

- 主界面: ![pic](/pics/工厂模型_厂区.png)
- 编辑厂区信息: ![pic](/pics/工厂模型_厂区_编辑.png)
- 关联区域: ![pic](/pics/工厂模型_厂区_区域关联.png)

### 3.3 字段说明

- 厂区代码长度限制为固定长度 2;其他约束满足系统 code 的统一约束
- 详见 schema 设计

### 3.4 操作说明

#### 3.4.1 排序筛选

- 主界面-厂区列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:编码,名称,地址 1,,地址 2,地址 3,地址 4
  - 筛选
    - 默认筛选: 无
    - 字段范围:编码,名称,地址 1,,地址 2,地址 3,地址 4
- 主界面-厂区区域信息
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:区域编码,区域名称
  - 筛选
    - 默认筛选: 无
    - 字段范围:区域编码,区域名称

#### 3.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑厂区信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必选项
- 地址 1,,地址 2,地址 3,地址 4 为手动录入,可选项

#### 3.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 3.4.4 删除

- 清除所选记录
- 已被区域使用时,不可删除.
- 删除后,将该厂区从企业关联的厂区中移除.

#### 3.4.5 刷新

- 获取服务端最新数据

#### 3.4.6 关联

- 参考界面"关联区域",进行厂区与区域的关联或反操作.

---

## 4. 区域

### 4.1 介绍

- 用来管理位置/工作中心/库区,与企业管理厂区的模式相同,为车间级别
- 区域用来分组管理位置,区域不会重叠,即一个位置只能属于一个区域.

### 4.2 界面说明

- 主界面: ![pic](/pics/工厂模型_区域.png)
- 编辑区域信息: ![pic](/pics/工厂模型_区域_编辑.png)
- 关联位置: ![pic](/pics/工厂模型_区域_位置关联.png)

### 4.3 字段说明

- 区域代码长度限制为固定长度 4;其他约束满足系统 code 的统一约束
- 详见 schema 设计

### 4.4 操作说明

#### 4.4.1 排序筛选

- 主界面-区域列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:编码,名称,创建时间,修改时间
  - 筛选
    - 默认筛选: 无
    - 字段范围:编码,名称,创建时间,修改时间
    - 支持扫码查询
- 主界面-区域位置信息
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:位置编码,位置名称
  - 筛选
    - 默认筛选: 无
    - 字段范围:位置编码,位置名称
    - 支持扫码查询

#### 4.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑区域信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必选项

#### 4.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 4.4.4 删除

- 清除所选记录
- 已被位置使用时,不可删除.
- 删除后,将该区域从厂区关联的区域中移除.

#### 4.4.5 刷新

- 获取服务端最新数据

#### 4.4.6 标签

- 打印区域标签
  - 打印内容:区域编码,区域名称
  - 打印数量:用户指定
  - 打印范围:筛选出的区域列表中的所有区域

#### 4.4.7 关联

- 参考界面"关联位置",进行区域与位置的关联或反操作.

---

## 5. 区段

### 5.1 介绍

- 区段用来分组管理位置
- 区段与位置相比,提供了更高的角度来管理生产,库存等信息,如:
  - 对库存管理而言:
    - 用户可以为所有的原材料库区定义一个区段,可以为所有的包材库区定义一个区段,也可以将整个仓库的所有库区定义为一个区段
    - 可以将车间内的存储区域分组为一个或多个线边仓（区段）
  - 对生产管理而言:
    - 用户可以为同工艺段的工作中心/产线定义一个区段,也可以将整个车间的所有工作中心/产线定义为一个区段

### 5.2 界面说明

- 主界面: ![pic](/pics/工厂模型_区段.png)
- 编辑区段信息: ![pic](/pics/工厂模型_区段_编辑.png)
- 关联位置: ![pic](/pics/工厂模型_区段_位置关联.png)

### 5.3 字段说明

- 区段代码长度限制为固定长度 4;其他约束满足系统 code 的统一约束
- 详见 schema 设计

### 5.4 操作说明

#### 5.4.1 排序筛选

- 主界面-区段列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:编码,名称,创建时间,修改时间
  - 筛选
    - 默认筛选: 无
    - 字段范围:编码,名称,创建时间,修改时间
    - 支持扫码查询
- 主界面-区段位置信息
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:位置编码,位置名称
  - 筛选
    - 默认筛选: 无
    - 字段范围:位置编码,位置名称
    - 支持扫码查询

#### 5.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑区段信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必选项
- 类型:从系统字典 SECTOR_TYPE 中获取
- 存储物料类型:类型为"仓库"时,才允许选择该项

#### 5.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 5.4.4 删除

- 清除所选记录
- 已被位置使用时,不可删除.

#### 5.4.5 刷新

- 获取服务端最新数据

#### 5.4.6 标签

- 打印区段标签
  - 打印内容:区段编码,区段名称
  - 打印数量:用户指定
  - 打印范围:筛选出的区段列表中的所有区段

#### 5.4.7 关联

- 参考界面"关联位置",进行区段与位置的关联或反操作.
- 区段下关联的位置必须为同一区域的位置
  - 没有区域的位置,不允许关联到区段

---

## 6. 位置

### 6.1 介绍

- EBR 可以对工厂的位置进行管理,主要包括库区及产线位置.
- 位置,区域,厂区,企业组成一个分层系统,每个位置都定义在一个精确的厂区和区域上,目的是让位置的使用尽可能的接近真实的划分.
- 位置创建完成后,可以通过区域来组织位置
- 通过创建位置,可以快速创建该位置相关的区域与厂区

### 6.2 界面说明

- 主界面: ![pic](/pics/工厂模型_位置.png)
- 编辑位置信息: ![pic](/pics/工厂模型_位置_编辑.png)
- 厂区,区域,位置的代码与工厂信息中的厂区,区域,位置的约束相同
- 厂区: 区域关联的厂区
- 区域: 位置关联的区域
- 区段: 位置关联的区段

### 6.3 字段说明

- 位置代码长度限制为 1-6;其他约束满足系统 code 的统一约束
- 其他详见 schema 设计

### 6.4 操作说明

#### 6.4.1 排序筛选

- 主界面-位置列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围: 编码,名称,厂区,区域,区段
  - 筛选
    - 默认筛选: 无
    - 字段范围: 编码,名称,厂区,区域,区段
    - 支持扫码查询

#### 6.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑位置信息"界面
- 位置编码手动录入,符合字段要求
- 位置名称手动录入,必选项
- 厂区,区域,区段可以从已有厂区和区域中选择,也可以以手动录入;
  - 选择的话遵循已有厂区,区域,区段的关联约束,手动录入则需遵循厂区,区域,区段的 code 约束规则.
  - 手动录入的厂区,区域,区段,在提交保存时,如果不存在,则系统自动创建厂区,区域,区段信息,并处理厂区,区域,区段,位置的关联关系.
    - 手动录入时,厂区,区域的编码和名称需要全部填写,或全部留空,区段编码和名称为选填.
  - 从列表选择时,厂区,区域,区段的名称不可修改
#### 6.4.3 编辑

- 除厂区,区域,区段的编码与名称以及位置编码不可编辑外,其他与新增操作相同

#### 6.4.4 删除

- 清除所选记录
- 删除后,将该位置从区域关联的位置中移除.
- 删除后,将该位置从区段关联的位置中移除.
- 有工作中心/库区等已使用该位置时,不允许删除,提示用户"无法删除,位置 XX 已与工作中心/库区 XX 关联"

#### 6.4.5 刷新

- 获取服务端最新数据

#### 6.4.6 标签

- 打印位置标签
  - 打印内容:位置编码,位置名称
  - 打印数量:用户指定
  - 打印范围:筛选出的位置列表中的所有位置

---

## 7. 工作中心

### 7.1 介绍

- 生产任务由工作中心执行,大多生产活动通过工作中心组织.为产线级别
- 一个工作中心下可以有一个或多个工站
- 工作中心:位置 <=> 1:1

### 7.2 界面说明

- 主界面: ![pic](/pics/工厂模型_工作中心.png)
- 编辑工作中心信息: ![pic](/pics/工厂模型_工作中心_编辑.png)
- 编辑工作中心信息: ![pic](/pics/工厂模型_工作中心_工站关联.png)
- 突出显示当前工作中心
- 厂区编码:通过区域可获取,不可编辑
- 区域编码:通过位置可获取,不可编辑
- 区段编码:通过位置可获取,不可编辑

### 7.3 字段说明

- 工作中心代码长度限制为 1-20;其他约束满足系统 code 的统一约束
- 详见 schema 设计

### 7.4 操作说明

#### 7.4.1 排序筛选

- 主界面-工作中心列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:编码,名称,主减库存路径,从减库存路径,返回路径
  - 筛选
    - 默认筛选: 无
    - 字段范围:编码,名称,主减库存路径,从减库存路径,返回路径

#### 7.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑工作中心信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必填项
- 厂区,区域,位置从已有厂区,区域和位置中选择,遵循已有厂区,区域与位置的关联约束,区段通过位置获取,不可编辑
- 区段与路径从系统已有仓库区段和路径中选择,区段在区段管理中创建,路径在领料中创建
- 主减库存路径,从减库存路在选择主捡料区段,从捡料区段之前不可用

#### 7.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 7.4.4 删除

- 清除所选记录
- 已被工站使用时,不可删除, 提示用户"无法删除,工站 XX 与工作中心 XX 存在关联"
- 系统中至少应该有一个工作中心.

#### 7.4.5 刷新

- 获取服务端最新数据

#### 7.4.6 关联

- 参考界面"关联工站",进行工作中心与工站的关联或反操作.

---

## 8. 工站

### 8.1 介绍

- 工站管理可以进行工站配置:外设,工作中心;一个工站只能关联一个工作中心,且必须关联一个工作中心
- 进入系统时,需要指定当前工位的工站是哪个（注:本系统的工站没有与物理设备进行绑定）
- 每个工站在厂区范围内必须被唯一标识
- EBR 系统没有控制工站的链接点数, 即授权不包含连接点数的限制
- 客户端不需要单独安装, 浏览器符合要求即可

### 8.2 界面说明

- 主界面: ![pic](/pics/工厂模型_工站.png)
- 编辑工站信息: ![pic](/pics/工厂模型_工站_编辑.png)
- 突出显示当前工站
- 工作中心编码:通过工站可获取,不可编辑

### 8.3 字段说明

- 工站代码长度限制为 1-20;其他约束满足系统 code 的统一约束
- 详见 schema 设计
  - 编码: 唯一; 必填项
  - 名称: 唯一; 必填项
  - 外设: 可选项
  - 创建日期:
  - 最后修改日期:
  - 描述

### 8.4 操作说明

#### 8.4.1 排序筛选

- 主界面-工站列表
  - 排序
    - 默认排序: 按照编码升序
    - 字段范围:工站,工作中心(暂不实现),外设名称(暂不实现),创建时间,最后使用时间
  - 筛选
    - 默认筛选: 无
    - 字段范围:工站,工作中心(暂不实现),外设名称(暂不实现),创建时间,最后使用时间

#### 8.4.2 新增

- 按照 schema 约束添加新记录,参考"编辑工站信息"界面
- 编码手动录入,符合字段要求
- 名称手动录入,必填项
- 工作中心只读,从所属工作中心获取
- 外设名称从已有外设名称中选择

#### 8.4.3 编辑

- 除编码不可编辑外,其他与新增操作相同

#### 8.4.4 删除

- 清除所选记录
- 系统中至少应该有一个工站.

#### 8.4.5 刷新

- 获取服务端最新数据

### 8.5 初始化

- 系统内置一个初始工作中心与工站(隐含要求有一组厂区+区域+位置);
  - APP 启动时,如果系统中没有工作中心和工站,提示用户"没有可用工作中心与工站,无法进入系统,请先导入工作中心与工站"
- 内置数据如下: ![pic](/pics/工厂模型_工作中心_初始化.png)

---

## 9 外设管理
  - (暂不实现)衡器添加在外设设备中添加,要求一个衡器值只能绑定一个工作站.
    - 方案:设备驱动不做该限制,在使用级别做限制:外设管理/工站管理
- 请咨询```李梦松```