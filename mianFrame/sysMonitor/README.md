# 系统监视

## 1. 介绍

### 1.1 目的

- 监视系统是否正常运行; 并提供系统状态供用户查看,提供这些状态的接口供外部系统(仅限通过 OPC Server)调用

### 1.2 使用

- 终端可以查看系统状态

## 2. 系统监视

### 2.1 监视范围

- 数据库检测:
  - 是否可访问: EBR 数据库是否可连接; 状态使用颜色管理:
    - 可用: 绿色
    - 不可用: 红色
- 后端服务
  - 是否可访问: 后端服务是否可调用 状态使用颜色管理:
    - 可用: 绿色
    - 不可用: 红色
  - 连接数/CPU/内存/磁盘/网络使用及服务进程
- OPC Tag 检测
  - 对已配置的 OPC Tag 进行检测 状态使用颜色管理:
    - 可用: 绿色
    - 不可用: 红色
- 终端检测

### 2.2 监视配置

- DB 列表: 读取系统已有配置, 不可修改,内置数据
- Server/Service 列表(读取系统已有配置)
- OPC Tag 列表(读取系统已有配置/手动单独配置)
- 使用 EBRConfig 表,propertyKey 为 SysMonitor, data 为 JSON 格式的配置项:

```JSON
  {
    "SysMonitor": {
    "Frequency": " 3",
    "ApplicationServer": "1",
    "Tags": {
    "Tag0": {
    "Description": "Name1",
    "Type": " Int",
    "Value": "1111",
    "Server": "server01",
    "Tag": "item001"
       }
      }
     }
    }
```

### 2.3 监视方式

- 心跳机制
- 频率设定
  - 默认 3 分钟

### 2.4 追溯

- 配置更新时
- DB 状态变化时
- Server/Service 状态变化时
- OPC Tag 状态变化时
